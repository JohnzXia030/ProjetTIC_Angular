<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<div *ngIf="exerciseDB">
  <h1>Exercice {{exerciseDB.idExercise}} </h1>
  <mat-card>{{exerciseDB.exerciseText}}</mat-card>
</div>

<div class="center">
  <form (ngSubmit)="onSubmit()" class="example-form">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Votre requÃªte</mat-label>
      <textarea matInput placeholder="select ..." value="" type="text"  [(ngModel)]="model.sqlQuery" name="sqlQuery" id="sqlQuery"></textarea>
    </mat-form-field>
    <button  type="submit" class="btn btn-success">Submit</button>
  </form>
</div>


<div [hidden] = "this.dataResults==null||this.ErrorCode()==400" align="center">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

    <!-- Position Column -->
    <ng-container matColumnDef="id_emp">
      <th mat-header-cell *matHeaderCellDef> {{this.getHeaders()[0]}} </th>
      <td mat-cell *matCellDef="let emp"> emp.id_emp </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="nom_emp">
      <th mat-header-cell *matHeaderCellDef> {{this.getHeaders()[1]}} </th>
      <td mat-cell *matCellDef="let emp"> {{this.dataResults.key(this.getHeaders()[1])}} </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>

<div [hidden] = "this.dataResults==null||this.ErrorCode()==400">
  <table border align="center">
    <thead>
    <tr>
      <th *ngFor="let header of getHeaders()">{{header}}</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of this.dataResults">
      <td *ngFor="let key of getHeaders()">{{item[key]}}</td>
    </tr>
    </tbody>
  </table>
</div>
<!--
<div [hidden] = "this.dataResults==null||this.ErrorCode()==200">
  {{this.dataResults.ErrorMessage}}
</div>
-->
<!--<div [hidden] = "this.ErrorCode()==200">-->

<!--</div>-->

<button class="btn btn-success" (click)="nextExercise()">Exercice suivant</button>

<div class="center" *ngIf="correct==true">
  <mat-icon class="success">check</mat-icon>
</div>
<div class="center" *ngIf="correct==false">
  <mat-icon class="fail">close</mat-icon>
</div>